<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/danwrong/restler"

    >restler (v3.4.0)</a>
</h1>
<h4>An HTTP client library for node.js</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.restler">module restler</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request">
            function <span class="apidocSignatureSpan">restler.</span>Request
            <span class="apidocSignatureSpan">(uri, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service">
            function <span class="apidocSignatureSpan">restler.</span>Service
            <span class="apidocSignatureSpan">(defaults)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.data">
            function <span class="apidocSignatureSpan">restler.</span>data
            <span class="apidocSignatureSpan">(filename, contentType, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.del">
            function <span class="apidocSignatureSpan">restler.</span>del
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.file">
            function <span class="apidocSignatureSpan">restler.</span>file
            <span class="apidocSignatureSpan">(path, filename, fileSize, encoding, contentType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.get">
            function <span class="apidocSignatureSpan">restler.</span>get
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.head">
            function <span class="apidocSignatureSpan">restler.</span>head
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.json">
            function <span class="apidocSignatureSpan">restler.</span>json
            <span class="apidocSignatureSpan">(url, data, options, method)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.patch">
            function <span class="apidocSignatureSpan">restler.</span>patch
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.patchJson">
            function <span class="apidocSignatureSpan">restler.</span>patchJson
            <span class="apidocSignatureSpan">(url, data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.post">
            function <span class="apidocSignatureSpan">restler.</span>post
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.postJson">
            function <span class="apidocSignatureSpan">restler.</span>postJson
            <span class="apidocSignatureSpan">(url, data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.put">
            function <span class="apidocSignatureSpan">restler.</span>put
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.putJson">
            function <span class="apidocSignatureSpan">restler.</span>putJson
            <span class="apidocSignatureSpan">(url, data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.request">
            function <span class="apidocSignatureSpan">restler.</span>request
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.service">
            function <span class="apidocSignatureSpan">restler.</span>service
            <span class="apidocSignatureSpan">(constructor, defaults, methods)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">restler.</span>Request.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">restler.</span>Service.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">restler.</span>index</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">restler.</span>multipartform</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">restler.</span>parsers</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.restler.Request">module restler.Request</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.Request">
            function <span class="apidocSignatureSpan">restler.</span>Request
            <span class="apidocSignatureSpan">(uri, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.super_">
            function <span class="apidocSignatureSpan">restler.Request.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.restler.Request.prototype">module restler.Request.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._applyAuth">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_applyAuth
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._decode">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_decode
            <span class="apidocSignatureSpan">(body, response, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._encode">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_encode
            <span class="apidocSignatureSpan">(body, response, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._fireCancelTimeout">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_fireCancelTimeout
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._fireError">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_fireError
            <span class="apidocSignatureSpan">(err, response)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._fireSuccess">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_fireSuccess
            <span class="apidocSignatureSpan">(body, response)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._fireTimeout">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_fireTimeout
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._fullPath">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_fullPath
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._iconv">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_iconv
            <span class="apidocSignatureSpan">(body, response)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._isRedirect">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_isRedirect
            <span class="apidocSignatureSpan">(response)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._makeRequest">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_makeRequest
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._responseHandler">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_responseHandler
            <span class="apidocSignatureSpan">(response)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype._retry">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_retry
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype.abort">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>abort
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype.retry">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>retry
            <span class="apidocSignatureSpan">(timeout)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Request.prototype.run">
            function <span class="apidocSignatureSpan">restler.Request.prototype.</span>run
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.restler.Service">module restler.Service</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service.Service">
            function <span class="apidocSignatureSpan">restler.</span>Service
            <span class="apidocSignatureSpan">(defaults)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.restler.Service.prototype">module restler.Service.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service.prototype._url">
            function <span class="apidocSignatureSpan">restler.Service.prototype.</span>_url
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service.prototype._withDefaults">
            function <span class="apidocSignatureSpan">restler.Service.prototype.</span>_withDefaults
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service.prototype.del">
            function <span class="apidocSignatureSpan">restler.Service.prototype.</span>del
            <span class="apidocSignatureSpan">(path, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service.prototype.get">
            function <span class="apidocSignatureSpan">restler.Service.prototype.</span>get
            <span class="apidocSignatureSpan">(path, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service.prototype.json">
            function <span class="apidocSignatureSpan">restler.Service.prototype.</span>json
            <span class="apidocSignatureSpan">(method, path, data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service.prototype.patch">
            function <span class="apidocSignatureSpan">restler.Service.prototype.</span>patch
            <span class="apidocSignatureSpan">(path, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service.prototype.post">
            function <span class="apidocSignatureSpan">restler.Service.prototype.</span>post
            <span class="apidocSignatureSpan">(path, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service.prototype.put">
            function <span class="apidocSignatureSpan">restler.Service.prototype.</span>put
            <span class="apidocSignatureSpan">(path, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.Service.prototype.request">
            function <span class="apidocSignatureSpan">restler.Service.prototype.</span>request
            <span class="apidocSignatureSpan">(path, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.restler.index">module restler.index</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.Request">
            function <span class="apidocSignatureSpan">restler.index.</span>Request
            <span class="apidocSignatureSpan">(uri, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.Service">
            function <span class="apidocSignatureSpan">restler.index.</span>Service
            <span class="apidocSignatureSpan">(defaults)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.data">
            function <span class="apidocSignatureSpan">restler.index.</span>data
            <span class="apidocSignatureSpan">(filename, contentType, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.del">
            function <span class="apidocSignatureSpan">restler.index.</span>del
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.file">
            function <span class="apidocSignatureSpan">restler.index.</span>file
            <span class="apidocSignatureSpan">(path, filename, fileSize, encoding, contentType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.get">
            function <span class="apidocSignatureSpan">restler.index.</span>get
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.head">
            function <span class="apidocSignatureSpan">restler.index.</span>head
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.json">
            function <span class="apidocSignatureSpan">restler.index.</span>json
            <span class="apidocSignatureSpan">(url, data, options, method)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.patch">
            function <span class="apidocSignatureSpan">restler.index.</span>patch
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.patchJson">
            function <span class="apidocSignatureSpan">restler.index.</span>patchJson
            <span class="apidocSignatureSpan">(url, data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.post">
            function <span class="apidocSignatureSpan">restler.index.</span>post
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.postJson">
            function <span class="apidocSignatureSpan">restler.index.</span>postJson
            <span class="apidocSignatureSpan">(url, data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.put">
            function <span class="apidocSignatureSpan">restler.index.</span>put
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.putJson">
            function <span class="apidocSignatureSpan">restler.index.</span>putJson
            <span class="apidocSignatureSpan">(url, data, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.request">
            function <span class="apidocSignatureSpan">restler.index.</span>request
            <span class="apidocSignatureSpan">(url, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.index.service">
            function <span class="apidocSignatureSpan">restler.index.</span>service
            <span class="apidocSignatureSpan">(constructor, defaults, methods)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">restler.index.</span>parsers</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.restler.multipartform">module restler.multipartform</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.multipartform.data">
            function <span class="apidocSignatureSpan">restler.multipartform.</span>data
            <span class="apidocSignatureSpan">(filename, contentType, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.multipartform.file">
            function <span class="apidocSignatureSpan">restler.multipartform.</span>file
            <span class="apidocSignatureSpan">(path, filename, fileSize, encoding, contentType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.multipartform.sizeOf">
            function <span class="apidocSignatureSpan">restler.multipartform.</span>sizeOf
            <span class="apidocSignatureSpan">(parts, boundary)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.multipartform.write">
            function <span class="apidocSignatureSpan">restler.multipartform.</span>write
            <span class="apidocSignatureSpan">(stream, data, callback, boundary)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">restler.multipartform.</span>defaultBoundary</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.restler.parsers">module restler.parsers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.parsers.auto">
            function <span class="apidocSignatureSpan">restler.parsers.</span>auto
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.parsers.json">
            function <span class="apidocSignatureSpan">restler.parsers.</span>json
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.parsers.xml">
            function <span class="apidocSignatureSpan">restler.parsers.</span>xml
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.restler.parsers.yaml">
            function <span class="apidocSignatureSpan">restler.parsers.</span>yaml
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.restler" id="apidoc.module.restler">module restler</a></h1>


    <h2>
        <a href="#apidoc.element.restler.Request" id="apidoc.element.restler.Request">
        function <span class="apidocSignatureSpan">restler.</span>Request
        <span class="apidocSignatureSpan">(uri, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Request(uri, options) {
  events.EventEmitter.call(this);
  this.url = url.parse(uri);
  this.options = options;
  this.headers = {
    &#x27;Accept&#x27;: &#x27;*/*&#x27;,
    &#x27;User-Agent&#x27;: &#x27;Restler for node.js&#x27;,
    &#x27;Host&#x27;: this.url.host
  };

  this.headers[&#x27;Accept-Encoding&#x27;] = &#x27;gzip, deflate&#x27;;

  mixin(this.headers, options.headers || {});

  // set port and method defaults
  if (!this.url.port) this.url.port = (this.url.protocol == &#x27;https:&#x27;) ? &#x27;443&#x27; : &#x27;80&#x27;;
  if (!this.options.method) this.options.method = (this.options.data) ? &#x27;POST&#x27; : &#x27;GET&#x27;;
  if (typeof this.options.followRedirects == &#x27;undefined&#x27;) this.options.followRedirects = true;

  // stringify query given in options of not given in URL
  if (this.options.query &#x26;&#x26; !this.url.query) {
    if (typeof this.options.query == &#x27;object&#x27;)
      this.url.query = qs.stringify(this.options.query);
    else this.url.query = this.options.query;
  }

  this._applyAuth();

  if (this.options.multipart) {
    this.headers[&#x27;Content-Type&#x27;] = &#x27;multipart/form-data; boundary=&#x27; + multipart.defaultBoundary;
    var multipart_size = multipart.sizeOf(this.options.data, multipart.defaultBoundary);
    if (typeof multipart_size === &#x27;number&#x27; &#x26;&#x26; multipart_size === multipart_size) {
        this.headers[&#x27;Content-Length&#x27;] = multipart_size;
    }
    else {
        console.log(&#x22;Building multipart request without Content-Length header, please specify all file sizes&#x22;);
    }
  } else {
    if (typeof this.options.data == &#x27;object&#x27; &#x26;&#x26; !Buffer.isBuffer(this.options.data)) {
      this.options.data = qs.stringify(this.options.data);
      this.headers[&#x27;Content-Type&#x27;] = &#x27;application/x-www-form-urlencoded&#x27;;
      this.headers[&#x27;Content-Length&#x27;] = this.options.data.length;
    }
    if (typeof this.options.data == &#x27;string&#x27;) {
      var buffer = new Buffer(this.options.data, this.options.encoding || &#x27;utf8&#x27;);
      this.options.data = buffer;
      this.headers[&#x27;Content-Length&#x27;] = buffer.length;
    }
    if (!this.options.data) {
      this.headers[&#x27;Content-Length&#x27;] = 0;
    }
  }

  var proto = (this.url.protocol == &#x27;https:&#x27;) ? https : http;

  this.request = proto.request({
    host: this.url.hostname,
    port: this.url.port,
    path: this._fullPath(),
    method: this.options.method,
    headers: this.headers,
    rejectUnauthorized: this.options.rejectUnauthorized,
    agent: this.options.agent
  });

  this._makeRequest();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Service" id="apidoc.element.restler.Service">
        function <span class="apidocSignatureSpan">restler.</span>Service
        <span class="apidocSignatureSpan">(defaults)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Service(defaults) {
  if (defaults.baseURL) {
   this.baseURL = defaults.baseURL;
   delete defaults.baseURL;
  }

  this.defaults = defaults;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.data" id="apidoc.element.restler.data">
        function <span class="apidocSignatureSpan">restler.</span>data
        <span class="apidocSignatureSpan">(filename, contentType, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">data = function (filename, contentType, data) {
  return new Data(filename, contentType, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
},

&#x27;Test multipart request with Data vars&#x27;: function(test) {
  rest.post(host, {
    data: {
      a: 10,
      b: rest.<span class="apidocCodeKeywordSpan">data</span>(&#x27;b.txt&#x27;, &#x27;text/plain&#x27;, &#x27;thing&#x27;),
      c: rest.data(&#x27;c.txt&#x27;, &#x27;text/plain&#x27;, new Buffer(&#x27;thing&#x27;))
    },
    multipart: true
  }).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /content-type\: multipart\/form-data/, &#x27;should set &#x22;content-type&#x22; header&#x27;);
    test.re(data, /name=&#x22;a&#x22;(\s)+10/, &#x27;should send a=10&#x27;);
    test.re(data, /name=&#x22;b&#x22;; filename=&#x22;b.txt&#x22;\s+Content-Length: 5\s+Content-Type: text\/plain\s+thing\s/, &#
x27;should send b=thing&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.del" id="apidoc.element.restler.del">
        function <span class="apidocSignatureSpan">restler.</span>del
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function del(url, options) {
  return request(url, shortcutOptions(options, &#x27;DELETE&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.post(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^POST/, &#x27;should be POST&#x27;);
    test.done();
  });
},

&#x27;Should DELETE&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">del</span>(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^DELETE/, &#x27;should be DELETE&#x27;);
    test.done();
  });
},

&#x27;Should HEAD&#x27;: function(test) {
  rest.head(host).on(&#x27;complete&#x27;, function(data, response) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.file" id="apidoc.element.restler.file">
        function <span class="apidocSignatureSpan">restler.</span>file
        <span class="apidocSignatureSpan">(path, filename, fileSize, encoding, contentType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">file = function (path, filename, fileSize, encoding, contentType) {
  return new File(path, filename, fileSize, encoding, contentType)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// multipart request sending a 321567 byte long file using https
rest.post(&#x27;https://twaud.io/api/v1/upload.json&#x27;, {
  multipart: true,
  username: &#x27;danwrong&#x27;,
  password: &#x27;wouldntyouliketoknow&#x27;,
  data: {
    &#x27;sound[message]&#x27;: &#x27;hello from restler!&#x27;,
    &#x27;sound[file]&#x27;: rest.<span class="apidocCodeKeywordSpan">file</span>(&#x27;doug-e-fresh_the-show.mp3&#x27;, null, 321567
, null, &#x27;audio/mpeg&#x27;)
  }
}).on(&#x27;complete&#x27;, function(data) {
  console.log(data.audio_url);
});

// create a service constructor for very easy API wrappers a la HTTParty...
Twitter = rest.service(function(u, p) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.get" id="apidoc.element.restler.get">
        function <span class="apidocSignatureSpan">restler.</span>get
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function get(url, options) {
 return request(url, shortcutOptions(options, &#x27;GET&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Example usage
-------------

```javascript
var rest = require(&#x27;./restler&#x27;);

rest.<span class="apidocCodeKeywordSpan">get</span>(&#x27;http://google.com&#x27;).on(&#x27;complete&#x27;, function(result) {
  if (result instanceof Error) {
    console.log(&#x27;Error:&#x27;, result.message);
    this.retry(5000); // try again after 5 sec
  } else {
    console.log(result);
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.head" id="apidoc.element.restler.head">
        function <span class="apidocSignatureSpan">restler.</span>head
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function head(url, options) {
  return request(url, shortcutOptions(options, &#x27;HEAD&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.del(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^DELETE/, &#x27;should be DELETE&#x27;);
    test.done();
  });
},

&#x27;Should HEAD&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">head</span>(host).on(&#x27;complete&#x27;, function(data, response) {
    test.equal(response.headers[&#x27;request-method&#x27;], &#x27;head&#x27;, &#x27;should be HEAD&#x27;);
    test.done();
  });
},

&#x27;Should GET withouth path&#x27;: function(test) {
  rest.get(host).on(&#x27;complete&#x27;, function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.json" id="apidoc.element.restler.json">
        function <span class="apidocSignatureSpan">restler.</span>json
        <span class="apidocSignatureSpan">(url, data, options, method)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function json(url, data, options, method) {
  options = options || {};
  options.parser = (typeof options.parser !== &#x22;undefined&#x22;) ? options.parser : parsers.auto;
  options.headers = options.headers || {};
  options.headers[&#x27;content-type&#x27;] = &#x27;application/json&#x27;;
  options.data = JSON.stringify(data || {});
  options.method = method || &#x27;GET&#x27;;
  return request(url, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.patch" id="apidoc.element.restler.patch">
        function <span class="apidocSignatureSpan">restler.</span>patch
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function patch(url, options) {
  return request(url, shortcutOptions(options, &#x27;PATCH&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.get(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^GET/, &#x27;should be GET&#x27;);
    test.done();
  });
},

&#x27;Should PATCH&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">patch</span>(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^PATCH/, &#x27;should be PATCH&#x27;);
    test.done();
  });
},

&#x27;Should PUT&#x27;: function(test) {
  rest.put(host).on(&#x27;complete&#x27;, function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.patchJson" id="apidoc.element.restler.patchJson">
        function <span class="apidocSignatureSpan">restler.</span>patchJson
        <span class="apidocSignatureSpan">(url, data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function patchJson(url, data, options) {
  return json(url, data, options, &#x27;PATCH&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    test.equal(obj.secret, data.secret, &#x27;returned: &#x27; + util.inspect(data));
    test.done();
  });
},

&#x27;Should patch and parse JSON via shortcut method&#x27;: function(test) {
  var obj = { secret : &#x27;very secret string&#x27; };
  rest.<span class="apidocCodeKeywordSpan">patchJson</span>(host + &#x27;/push-json&#x27;, obj).on(&#x27;complete&#x27;, function
(data) {
    test.equal(obj.secret, data.secret, &#x27;returned: &#x27; + util.inspect(data));
    test.done();
  });
},

&#x27;Should understand custom mime-type&#x27;: function(test) {
  rest.parsers.auto.matchers[&#x27;application/vnd.github+json&#x27;] = function(data, callback) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.post" id="apidoc.element.restler.post">
        function <span class="apidocSignatureSpan">restler.</span>post
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function post(url, options) {
  return request(url, shortcutOptions(options, &#x27;POST&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

rest.get(&#x27;http://someslowdomain.com&#x27;,{timeout: 10000}).on(&#x27;timeout&#x27;, function(ms){
  console.log(&#x27;did not return within &#x27;+ms+&#x27; ms&#x27;);
}).on(&#x27;complete&#x27;,function(data,response){
  console.log(&#x27;did not time out&#x27;);
});

rest.<span class="apidocCodeKeywordSpan">post</span>(&#x27;http://user:pass@service.com/action&#x27;, {
  data: { id: 334 },
}).on(&#x27;complete&#x27;, function(data, response) {
  if (response.statusCode == 201) {
    // you can get at the raw response like this...
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.postJson" id="apidoc.element.restler.postJson">
        function <span class="apidocSignatureSpan">restler.</span>postJson
        <span class="apidocSignatureSpan">(url, data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function postJson(url, data, options) {
  return json(url, data, options, &#x27;POST&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var client = new Twitter(&#x27;danwrong&#x27;, &#x27;password&#x27;);
client.update(&#x27;Tweeting using a Restler service thingy&#x27;).on(&#x27;complete&#x27;, function(data) {
console.log(data);
});

// post JSON
var jsonData = { id: 334 };
rest.<span class="apidocCodeKeywordSpan">postJson</span>(&#x27;http://example.com/action&#x27;, jsonData).on(&#x27;complete&#x27
;, function(data, response) {
// handle response
});

// put JSON
var jsonData = { id: 334 };
rest.putJson(&#x27;http://example.com/action&#x27;, jsonData).on(&#x27;complete&#x27;, function(data, response) {
// handle response
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.put" id="apidoc.element.restler.put">
        function <span class="apidocSignatureSpan">restler.</span>put
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function put(url, options) {
  return request(url, shortcutOptions(options, &#x27;PUT&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.patch(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^PATCH/, &#x27;should be PATCH&#x27;);
    test.done();
  });
},

&#x27;Should PUT&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">put</span>(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^PUT/, &#x27;should be PUT&#x27;);
    test.done();
  });
},

&#x27;Should POST&#x27;: function(test) {
  rest.post(host).on(&#x27;complete&#x27;, function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.putJson" id="apidoc.element.restler.putJson">
        function <span class="apidocSignatureSpan">restler.</span>putJson
        <span class="apidocSignatureSpan">(url, data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function putJson(url, data, options) {
  return json(url, data, options, &#x27;PUT&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var jsonData = { id: 334 };
rest.postJson(&#x27;http://example.com/action&#x27;, jsonData).on(&#x27;complete&#x27;, function(data, response) {
  // handle response
});

// put JSON
var jsonData = { id: 334 };
rest.<span class="apidocCodeKeywordSpan">putJson</span>(&#x27;http://example.com/action&#x27;, jsonData).on(&#x27;complete&#x27;,
function(data, response) {
  // handle response
});

```

TODO
----
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.request" id="apidoc.element.restler.request">
        function <span class="apidocSignatureSpan">restler.</span>request
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function request(url, options) {
  var request = new Request(url, options);
  request.on(&#x27;error&#x27;, function() {});
  process.nextTick(request.run.bind(request));
  return request;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!this.options.data) {
    this.headers[&#x27;Content-Length&#x27;] = 0;
  }
}

var proto = (this.url.protocol == &#x27;https:&#x27;) ? https : http;

this.request = proto.<span class="apidocCodeKeywordSpan">request</span>({
  host: this.url.hostname,
  port: this.url.port,
  path: this._fullPath(),
  method: this.options.method,
  headers: this.headers,
  rejectUnauthorized: this.options.rejectUnauthorized,
  agent: this.options.agent
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.service" id="apidoc.element.restler.service">
        function <span class="apidocSignatureSpan">restler.</span>service
        <span class="apidocSignatureSpan">(constructor, defaults, methods)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function service(constructor, defaults, methods) {
  constructor.prototype = new Service(defaults || {});
  mixin(constructor.prototype, methods);
  return constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  &#x27;sound[file]&#x27;: rest.file(&#x27;doug-e-fresh_the-show.mp3&#x27;, null, 321567, null, &#x27;audio/mpeg&#x27;)
}
}).on(&#x27;complete&#x27;, function(data) {
console.log(data.audio_url);
});

// create a service constructor for very easy API wrappers a la HTTParty...
Twitter = rest.<span class="apidocCodeKeywordSpan">service</span>(function(u, p) {
this.defaults.username = u;
this.defaults.password = p;
}, {
baseURL: &#x27;http://twitter.com&#x27;
}, {
update: function(message) {
  return this.post(&#x27;/statuses/update.json&#x27;, { data: { status: message } });
...</pre></li>
    </ul>












</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.restler.Request" id="apidoc.module.restler.Request">module restler.Request</a></h1>


    <h2>
        <a href="#apidoc.element.restler.Request.Request" id="apidoc.element.restler.Request.Request">
        function <span class="apidocSignatureSpan">restler.</span>Request
        <span class="apidocSignatureSpan">(uri, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Request(uri, options) {
  events.EventEmitter.call(this);
  this.url = url.parse(uri);
  this.options = options;
  this.headers = {
    &#x27;Accept&#x27;: &#x27;*/*&#x27;,
    &#x27;User-Agent&#x27;: &#x27;Restler for node.js&#x27;,
    &#x27;Host&#x27;: this.url.host
  };

  this.headers[&#x27;Accept-Encoding&#x27;] = &#x27;gzip, deflate&#x27;;

  mixin(this.headers, options.headers || {});

  // set port and method defaults
  if (!this.url.port) this.url.port = (this.url.protocol == &#x27;https:&#x27;) ? &#x27;443&#x27; : &#x27;80&#x27;;
  if (!this.options.method) this.options.method = (this.options.data) ? &#x27;POST&#x27; : &#x27;GET&#x27;;
  if (typeof this.options.followRedirects == &#x27;undefined&#x27;) this.options.followRedirects = true;

  // stringify query given in options of not given in URL
  if (this.options.query &#x26;&#x26; !this.url.query) {
    if (typeof this.options.query == &#x27;object&#x27;)
      this.url.query = qs.stringify(this.options.query);
    else this.url.query = this.options.query;
  }

  this._applyAuth();

  if (this.options.multipart) {
    this.headers[&#x27;Content-Type&#x27;] = &#x27;multipart/form-data; boundary=&#x27; + multipart.defaultBoundary;
    var multipart_size = multipart.sizeOf(this.options.data, multipart.defaultBoundary);
    if (typeof multipart_size === &#x27;number&#x27; &#x26;&#x26; multipart_size === multipart_size) {
        this.headers[&#x27;Content-Length&#x27;] = multipart_size;
    }
    else {
        console.log(&#x22;Building multipart request without Content-Length header, please specify all file sizes&#x22;);
    }
  } else {
    if (typeof this.options.data == &#x27;object&#x27; &#x26;&#x26; !Buffer.isBuffer(this.options.data)) {
      this.options.data = qs.stringify(this.options.data);
      this.headers[&#x27;Content-Type&#x27;] = &#x27;application/x-www-form-urlencoded&#x27;;
      this.headers[&#x27;Content-Length&#x27;] = this.options.data.length;
    }
    if (typeof this.options.data == &#x27;string&#x27;) {
      var buffer = new Buffer(this.options.data, this.options.encoding || &#x27;utf8&#x27;);
      this.options.data = buffer;
      this.headers[&#x27;Content-Length&#x27;] = buffer.length;
    }
    if (!this.options.data) {
      this.headers[&#x27;Content-Length&#x27;] = 0;
    }
  }

  var proto = (this.url.protocol == &#x27;https:&#x27;) ? https : http;

  this.request = proto.request({
    host: this.url.hostname,
    port: this.url.port,
    path: this._fullPath(),
    method: this.options.method,
    headers: this.headers,
    rejectUnauthorized: this.options.rejectUnauthorized,
    agent: this.options.agent
  });

  this._makeRequest();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.super_" id="apidoc.element.restler.Request.super_">
        function <span class="apidocSignatureSpan">restler.Request.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.restler.Request.prototype" id="apidoc.module.restler.Request.prototype">module restler.Request.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.restler.Request.prototype._applyAuth" id="apidoc.element.restler.Request.prototype._applyAuth">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_applyAuth
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_applyAuth = function () {
  var authParts;

  if (this.url.auth) {
    authParts = this.url.auth.split(&#x27;:&#x27;);
    this.options.username = authParts[0];
    this.options.password = authParts[1];
  }

  if (this.options.username &#x26;&#x26; this.options.password !== undefined) {
    var b = new Buffer([this.options.username, this.options.password].join(&#x27;:&#x27;));
    this.headers[&#x27;Authorization&#x27;] = &#x22;Basic &#x22; + b.toString(&#x27;base64&#x27;);
  } else if (this.options.accessToken) {
    this.headers[&#x27;Authorization&#x27;] = &#x22;Bearer &#x22; + this.options.accessToken;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// stringify query given in options of not given in URL
if (this.options.query &#x26;&#x26; !this.url.query) {
  if (typeof this.options.query == &#x27;object&#x27;)
    this.url.query = qs.stringify(this.options.query);
  else this.url.query = this.options.query;
}

this.<span class="apidocCodeKeywordSpan">_applyAuth</span>();

if (this.options.multipart) {
  this.headers[&#x27;Content-Type&#x27;] = &#x27;multipart/form-data; boundary=&#x27; + multipart.defaultBoundary;
  var multipart_size = multipart.sizeOf(this.options.data, multipart.defaultBoundary);
  if (typeof multipart_size === &#x27;number&#x27; &#x26;&#x26; multipart_size === multipart_size) {
      this.headers[&#x27;Content-Length&#x27;] = multipart_size;
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._decode" id="apidoc.element.restler.Request.prototype._decode">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_decode
        <span class="apidocSignatureSpan">(body, response, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_decode = function (body, response, callback) {
  var decoder = response.headers[&#x27;content-encoding&#x27;];
  if (decoder in decoders) {
    decoders[decoder].call(response, body, callback);
  } else {
    callback(null, body);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

response.on(&#x27;data&#x27;, function(chunk) {
  body += chunk;
});

response.on(&#x27;end&#x27;, function() {
  response.rawEncoded = body;
  self.<span class="apidocCodeKeywordSpan">_decode</span>(new Buffer(body, &#x27;binary&#x27;), response, function(err, body) {
    if (err) {
      self._fireError(err, response);
      return;
    }
    response.raw = body;
    body = self._iconv(body, response);
    self._encode(body, response, function(err, body) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._encode" id="apidoc.element.restler.Request.prototype._encode">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_encode
        <span class="apidocSignatureSpan">(body, response, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_encode = function (body, response, callback) {
  var self = this;
  if (self.options.decoding == &#x27;buffer&#x27;) {
    callback(null, body);
  } else {
    body = body.toString(self.options.decoding);
    if (self.options.parser) {
      self.options.parser.call(response, body, callback);
    } else {
      callback(null, body);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
self._decode(new Buffer(body, &#x27;binary&#x27;), response, function(err, body) {
  if (err) {
    self._fireError(err, response);
    return;
  }
  response.raw = body;
  body = self._iconv(body, response);
  self.<span class="apidocCodeKeywordSpan">_encode</span>(body, response, function(err, body) {
    if (err) {
      self._fireError(err, response);
    } else {
      self._fireSuccess(body, response);
    }
  });
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._fireCancelTimeout" id="apidoc.element.restler.Request.prototype._fireCancelTimeout">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_fireCancelTimeout
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fireCancelTimeout = function (){
  var self = this;
  if(self.options.timeout){
    clearTimeout(self.options.timeoutFn);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      self.options.parser.call(response, body, callback);
    } else {
      callback(null, body);
    }
  }
},
_fireError: function(err, response) {
  this.<span class="apidocCodeKeywordSpan">_fireCancelTimeout</span>();
  this.emit(&#x27;error&#x27;, err, response);
  this.emit(&#x27;complete&#x27;, err, response);
},
_fireCancelTimeout: function(){
  var self = this;
  if(self.options.timeout){
    clearTimeout(self.options.timeoutFn);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._fireError" id="apidoc.element.restler.Request.prototype._fireError">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_fireError
        <span class="apidocSignatureSpan">(err, response)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fireError = function (err, response) {
  this._fireCancelTimeout();
  this.emit(&#x27;error&#x27;, err, response);
  this.emit(&#x27;complete&#x27;, err, response);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  } else {
      self.url = url.parse(url.resolve(self.url.href, response.headers[&#x27;location&#x27;]));
      self._retry();
      // todo handle somehow infinite redirects
  }
} catch(err) {
  err.message = &#x27;Failed to follow redirect: &#x27; + err.message;
  self.<span class="apidocCodeKeywordSpan">_fireError</span>(err, response);
}
    } else {
var body = &#x27;&#x27;;

// When using browserify, response.setEncoding is not defined
if (typeof response.setEncoding == &#x27;function&#x27;)
  response.setEncoding(&#x27;binary&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._fireSuccess" id="apidoc.element.restler.Request.prototype._fireSuccess">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_fireSuccess
        <span class="apidocSignatureSpan">(body, response)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fireSuccess = function (body, response) {
  if (parseInt(response.statusCode) &#x3e;= 400) {
    this.emit(&#x27;fail&#x27;, body, response);
  } else {
    this.emit(&#x27;success&#x27;, body, response);
  }
  this.emit(response.statusCode.toString().replace(/\d{2}$/, &#x27;XX&#x27;), body, response);
  this.emit(response.statusCode.toString(), body, response);
  this.emit(&#x27;complete&#x27;, body, response);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        }
        response.raw = body;
        body = self._iconv(body, response);
        self._encode(body, response, function(err, body) {
          if (err) {
            self._fireError(err, response);
          } else {
            self.<span class="apidocCodeKeywordSpan">_fireSuccess</span>(body, response);
          }
        });
      });
    });
  }
},
_decode: function(body, response, callback) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._fireTimeout" id="apidoc.element.restler.Request.prototype._fireTimeout">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_fireTimeout
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fireTimeout = function (err){
  this.emit(&#x27;timeout&#x27;, err);
  this.aborted = true;
  this.timedout = true;
  this.request.abort();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.emit(&#x27;complete&#x27;, body, response);
},
_makeRequest: function() {
  var self = this;
  var timeoutMs = self.options.timeout;
  if(timeoutMs){
    self.options.timeoutFn = setTimeout(function(){
      self.<span class="apidocCodeKeywordSpan">_fireTimeout</span>(timeoutMs);
    },timeoutMs);
  }
  this.request.on(&#x27;response&#x27;, function(response) {
    self._fireCancelTimeout();
    self.emit(&#x27;response&#x27;, response);
    self._responseHandler(response);
  }).on(&#x27;error&#x27;, function(err) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._fullPath" id="apidoc.element.restler.Request.prototype._fullPath">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_fullPath
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_fullPath = function () {
  var path = this.url.pathname || &#x27;/&#x27;;
  if (this.url.hash) path += this.url.hash;
  if (this.url.query) path += &#x27;?&#x27; + this.url.query;
  return path;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

var proto = (this.url.protocol == &#x27;https:&#x27;) ? https : http;

this.request = proto.request({
  host: this.url.hostname,
  port: this.url.port,
  path: this.<span class="apidocCodeKeywordSpan">_fullPath</span>(),
  method: this.options.method,
  headers: this.headers,
  rejectUnauthorized: this.options.rejectUnauthorized,
  agent: this.options.agent
});

this._makeRequest();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._iconv" id="apidoc.element.restler.Request.prototype._iconv">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_iconv
        <span class="apidocSignatureSpan">(body, response)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_iconv = function (body, response) {
  var charset = response.headers[&#x27;content-type&#x27;];
  if (charset) {
    charset = /\bcharset=(.+)(?:;|$)/i.exec(charset);
    if (charset) {
      charset = charset[1].trim().toUpperCase();
      if (charset != &#x27;UTF-8&#x27;) {
        try {
          return iconv.decode(body, charset);
        } catch (err) {}
      }
    }
  }
  return body;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
response.rawEncoded = body;
self._decode(new Buffer(body, &#x27;binary&#x27;), response, function(err, body) {
  if (err) {
    self._fireError(err, response);
    return;
  }
  response.raw = body;
  body = self.<span class="apidocCodeKeywordSpan">_iconv</span>(body, response);
  self._encode(body, response, function(err, body) {
    if (err) {
      self._fireError(err, response);
    } else {
      self._fireSuccess(body, response);
    }
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._isRedirect" id="apidoc.element.restler.Request.prototype._isRedirect">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_isRedirect
        <span class="apidocSignatureSpan">(response)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_isRedirect = function (response) {
  return ([301, 302, 303, 307].indexOf(response.statusCode) &#x3e;= 0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
} else if (this.options.accessToken) {
  this.headers[&#x27;Authorization&#x27;] = &#x22;Bearer &#x22; + this.options.accessToken;
}
  },
  _responseHandler: function(response) {
var self = this;

if (self.<span class="apidocCodeKeywordSpan">_isRedirect</span>(response) &#x26;&#x26; self.options.followRedirects) {
  try {
    // 303 should redirect and retrieve content with the GET method
    // http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4
    if (response.statusCode === 303) {
        self.url    = url.parse(url.resolve(self.url.href, response.headers[&#x27;location&#x27;]));
        self.options.method = &#x27;GET&#x27;;
        delete self.options.data;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._makeRequest" id="apidoc.element.restler.Request.prototype._makeRequest">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_makeRequest
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_makeRequest = function () {
  var self = this;
  var timeoutMs = self.options.timeout;
  if(timeoutMs){
    self.options.timeoutFn = setTimeout(function(){
      self._fireTimeout(timeoutMs);
    },timeoutMs);
  }
  this.request.on(&#x27;response&#x27;, function(response) {
    self._fireCancelTimeout();
    self.emit(&#x27;response&#x27;, response);
    self._responseHandler(response);
  }).on(&#x27;error&#x27;, function(err) {
    self._fireCancelTimeout();
    if (!self.aborted) {
      self._fireError(err, null);
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: this._fullPath(),
  method: this.options.method,
  headers: this.headers,
  rejectUnauthorized: this.options.rejectUnauthorized,
  agent: this.options.agent
});

this.<span class="apidocCodeKeywordSpan">_makeRequest</span>();
}

util.inherits(Request, events.EventEmitter);

mixin(Request.prototype, {
_isRedirect: function(response) {
  return ([301, 302, 303, 307].indexOf(response.statusCode) &#x3e;= 0);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._responseHandler" id="apidoc.element.restler.Request.prototype._responseHandler">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_responseHandler
        <span class="apidocSignatureSpan">(response)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_responseHandler = function (response) {
  var self = this;

  if (self._isRedirect(response) &#x26;&#x26; self.options.followRedirects) {
    try {
      // 303 should redirect and retrieve content with the GET method
      // http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4
      if (response.statusCode === 303) {
          self.url    = url.parse(url.resolve(self.url.href, response.headers[&#x27;location&#x27;]));
          self.options.method = &#x27;GET&#x27;;
          delete self.options.data;
          self._retry();
      } else {
          self.url = url.parse(url.resolve(self.url.href, response.headers[&#x27;location&#x27;]));
          self._retry();
          // todo handle somehow infinite redirects
      }
    } catch(err) {
      err.message = &#x27;Failed to follow redirect: &#x27; + err.message;
      self._fireError(err, response);
    }
  } else {
    var body = &#x27;&#x27;;

    // When using browserify, response.setEncoding is not defined
    if (typeof response.setEncoding == &#x27;function&#x27;)
      response.setEncoding(&#x27;binary&#x27;);

    response.on(&#x27;data&#x27;, function(chunk) {
      body += chunk;
    });

    response.on(&#x27;end&#x27;, function() {
      response.rawEncoded = body;
      self._decode(new Buffer(body, &#x27;binary&#x27;), response, function(err, body) {
        if (err) {
          self._fireError(err, response);
          return;
        }
        response.raw = body;
        body = self._iconv(body, response);
        self._encode(body, response, function(err, body) {
          if (err) {
            self._fireError(err, response);
          } else {
            self._fireSuccess(body, response);
          }
        });
      });
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    self.options.timeoutFn = setTimeout(function(){
      self._fireTimeout(timeoutMs);
    },timeoutMs);
  }
  this.request.on(&#x27;response&#x27;, function(response) {
    self._fireCancelTimeout();
    self.emit(&#x27;response&#x27;, response);
    self.<span class="apidocCodeKeywordSpan">_responseHandler</span>(response);
  }).on(&#x27;error&#x27;, function(err) {
    self._fireCancelTimeout();
    if (!self.aborted) {
      self._fireError(err, null);
    }
  });
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype._retry" id="apidoc.element.restler.Request.prototype._retry">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>_retry
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_retry = function () {
  this.request.removeAllListeners().on(&#x27;error&#x27;, function() {});
  if (this.request.finished) {
    this.request.abort();
  }
  Request.call(this, this.url.href, this.options); // reusing request object to handle recursive calls and remember listeners
  this.run();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try {
  // 303 should redirect and retrieve content with the GET method
  // http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4
  if (response.statusCode === 303) {
      self.url    = url.parse(url.resolve(self.url.href, response.headers[&#x27;location&#x27;]));
      self.options.method = &#x27;GET&#x27;;
      delete self.options.data;
      self.<span class="apidocCodeKeywordSpan">_retry</span>();
  } else {
      self.url = url.parse(url.resolve(self.url.href, response.headers[&#x27;location&#x27;]));
      self._retry();
      // todo handle somehow infinite redirects
  }
} catch(err) {
  err.message = &#x27;Failed to follow redirect: &#x27; + err.message;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype.abort" id="apidoc.element.restler.Request.prototype.abort">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>abort
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">abort = function (err) {
  var self = this;

  if (err) {
    if (typeof err == &#x27;string&#x27;) {
      err = new Error(err);
    } else if (!(err instanceof Error)) {
      err = new Error(&#x27;AbortError&#x27;);
    }
    err.type = &#x27;abort&#x27;;
  } else {
    err = null;
  }

  self.request.on(&#x27;close&#x27;, function() {
    if (err) {
      self._fireError(err, null);
    } else {
      self.emit(&#x27;complete&#x27;, null, null);
    }
  });

  self.aborted = true;
  self.request.abort();
  self.emit(&#x27;abort&#x27;, err);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

#### events

* `complete: function(result, response)` - emitted when the request has finished whether it was successful or not. Gets passed the
 response result and the response object as arguments. If some error has occurred, `result` is always instance of `Error`, otherwise
 it contains response data.
* `success: function(data, response)` - emitted when the request was successful. Gets passed the response data and the response
object as arguments.
* `fail: function(data, response)` - emitted when the request was successful, but 4XX or 5XX status code returned. Gets passed the
 response data and the response object as arguments.
* `error: function(err, response)` - emitted when some errors have occurred (eg. connection aborted, parse, encoding, decoding failed
 or some other unhandled errors). Gets passed the `Error` object and the response object (when available) as arguments.
* `abort: function()` - emitted when `request.<span class="apidocCodeKeywordSpan">abort</span>()` is called.
* `timeout: function(ms)` - when a request takes more than the timeout option eg: {timeout:5000}, the request will be aborted. error
 and abort events will not be called, instead timeout will be emitted.
* `2XX`, `3XX`, `4XX`, `5XX: function(data, response)` - emitted for all requests with response codes in the range (eg. `2XX` emitted
 for 200, 201, 203).
* &#x3c;code&#x3e;&#x3c;i&#x3e;actual response code&#x3c;/i&#x3e;: function(data, response)&#x3c;/code&#x3e; - emitted for every
 single response code (eg. 404, 201, etc).

#### members

* `abort([error])` Cancels request. `abort` event is emitted. `request.aborted` is set to `true`. If non-falsy `error` is passed
, then `error` will be additionally emitted (with `error` passed as a param and `error.type` is set to `&#x22;abort&#x22;`). Otherwise
 only `complete` event will raise.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype.retry" id="apidoc.element.restler.Request.prototype.retry">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>retry
        <span class="apidocSignatureSpan">(timeout)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">retry = function (timeout) {
  var self = this;
  timeout = parseInt(timeout);
  var fn = self._retry.bind(self);
  if (!isFinite(timeout) || timeout &#x3c;= 0) {
    process.nextTick(fn, timeout);
  } else {
    setTimeout(fn, timeout);
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

```javascript
var rest = require(&#x27;./restler&#x27;);

rest.get(&#x27;http://google.com&#x27;).on(&#x27;complete&#x27;, function(result) {
if (result instanceof Error) {
  console.log(&#x27;Error:&#x27;, result.message);
  this.<span class="apidocCodeKeywordSpan">retry</span>(5000); // try again after 5 sec
} else {
  console.log(result);
}
});

rest.get(&#x27;http://twaud.io/api/v1/users/danwrong.json&#x27;).on(&#x27;complete&#x27;, function(data) {
console.log(data[0].message); // auto convert to object
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Request.prototype.run" id="apidoc.element.restler.Request.prototype.run">
        function <span class="apidocSignatureSpan">restler.Request.prototype.</span>run
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function () {
  var self = this;
  if (this.options.multipart) {
    multipart.write(this.request, this.options.data, function() {
      self.request.end();
    });
  } else {
    if (this.options.data) {
      this.request.write(this.options.data, this.options.encoding || &#x27;utf8&#x27;);
    }
    this.request.end();
  }

  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
},
_retry: function() {
  this.request.removeAllListeners().on(&#x27;error&#x27;, function() {});
  if (this.request.finished) {
    this.request.abort();
  }
  Request.call(this, this.url.href, this.options); // reusing request object to handle recursive calls and remember listeners
  this.<span class="apidocCodeKeywordSpan">run</span>();
},
run: function() {
  var self = this;
  if (this.options.multipart) {
    multipart.write(this.request, this.options.data, function() {
      self.request.end();
    });
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.restler.Service" id="apidoc.module.restler.Service">module restler.Service</a></h1>


    <h2>
        <a href="#apidoc.element.restler.Service.Service" id="apidoc.element.restler.Service.Service">
        function <span class="apidocSignatureSpan">restler.</span>Service
        <span class="apidocSignatureSpan">(defaults)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Service(defaults) {
  if (defaults.baseURL) {
   this.baseURL = defaults.baseURL;
   delete defaults.baseURL;
  }

  this.defaults = defaults;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.restler.Service.prototype" id="apidoc.module.restler.Service.prototype">module restler.Service.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.restler.Service.prototype._url" id="apidoc.element.restler.Service.prototype._url">
        function <span class="apidocSignatureSpan">restler.Service.prototype.</span>_url
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_url = function (path) {
  if (this.baseURL) return url.resolve(this.baseURL, path);
  else return path;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

this.defaults = defaults;
}

mixin(Service.prototype, {
request: function(path, options) {
  return request(this.<span class="apidocCodeKeywordSpan">_url</span>(path), this._withDefaults(options));
},
get: function(path, options) {
  return get(this._url(path), this._withDefaults(options));
},
patch: function(path, options) {
  return patch(this._url(path), this._withDefaults(options));
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Service.prototype._withDefaults" id="apidoc.element.restler.Service.prototype._withDefaults">
        function <span class="apidocSignatureSpan">restler.Service.prototype.</span>_withDefaults
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_withDefaults = function (options) {
  var o = mixin({}, this.defaults);
  return mixin(o, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

this.defaults = defaults;
}

mixin(Service.prototype, {
request: function(path, options) {
  return request(this._url(path), this.<span class="apidocCodeKeywordSpan">_withDefaults</span>(options));
},
get: function(path, options) {
  return get(this._url(path), this._withDefaults(options));
},
patch: function(path, options) {
  return patch(this._url(path), this._withDefaults(options));
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Service.prototype.del" id="apidoc.element.restler.Service.prototype.del">
        function <span class="apidocSignatureSpan">restler.Service.prototype.</span>del
        <span class="apidocSignatureSpan">(path, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">del = function (path, options) {
  return del(this._url(path), this._withDefaults(options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.post(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^POST/, &#x27;should be POST&#x27;);
    test.done();
  });
},

&#x27;Should DELETE&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">del</span>(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^DELETE/, &#x27;should be DELETE&#x27;);
    test.done();
  });
},

&#x27;Should HEAD&#x27;: function(test) {
  rest.head(host).on(&#x27;complete&#x27;, function(data, response) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Service.prototype.get" id="apidoc.element.restler.Service.prototype.get">
        function <span class="apidocSignatureSpan">restler.Service.prototype.</span>get
        <span class="apidocSignatureSpan">(path, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (path, options) {
  return get(this._url(path), this._withDefaults(options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Example usage
-------------

```javascript
var rest = require(&#x27;./restler&#x27;);

rest.<span class="apidocCodeKeywordSpan">get</span>(&#x27;http://google.com&#x27;).on(&#x27;complete&#x27;, function(result) {
  if (result instanceof Error) {
    console.log(&#x27;Error:&#x27;, result.message);
    this.retry(5000); // try again after 5 sec
  } else {
    console.log(result);
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Service.prototype.json" id="apidoc.element.restler.Service.prototype.json">
        function <span class="apidocSignatureSpan">restler.Service.prototype.</span>json
        <span class="apidocSignatureSpan">(method, path, data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">json = function (method, path, data, options) {
  return json(this._url(path), data, this._withDefaults(options), method);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Service.prototype.patch" id="apidoc.element.restler.Service.prototype.patch">
        function <span class="apidocSignatureSpan">restler.Service.prototype.</span>patch
        <span class="apidocSignatureSpan">(path, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">patch = function (path, options) {
  return patch(this._url(path), this._withDefaults(options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.get(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^GET/, &#x27;should be GET&#x27;);
    test.done();
  });
},

&#x27;Should PATCH&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">patch</span>(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^PATCH/, &#x27;should be PATCH&#x27;);
    test.done();
  });
},

&#x27;Should PUT&#x27;: function(test) {
  rest.put(host).on(&#x27;complete&#x27;, function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Service.prototype.post" id="apidoc.element.restler.Service.prototype.post">
        function <span class="apidocSignatureSpan">restler.Service.prototype.</span>post
        <span class="apidocSignatureSpan">(path, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">post = function (path, options) {
  return post(this._url(path), this._withDefaults(options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

rest.get(&#x27;http://someslowdomain.com&#x27;,{timeout: 10000}).on(&#x27;timeout&#x27;, function(ms){
  console.log(&#x27;did not return within &#x27;+ms+&#x27; ms&#x27;);
}).on(&#x27;complete&#x27;,function(data,response){
  console.log(&#x27;did not time out&#x27;);
});

rest.<span class="apidocCodeKeywordSpan">post</span>(&#x27;http://user:pass@service.com/action&#x27;, {
  data: { id: 334 },
}).on(&#x27;complete&#x27;, function(data, response) {
  if (response.statusCode == 201) {
    // you can get at the raw response like this...
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Service.prototype.put" id="apidoc.element.restler.Service.prototype.put">
        function <span class="apidocSignatureSpan">restler.Service.prototype.</span>put
        <span class="apidocSignatureSpan">(path, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">put = function (path, options) {
  return put(this._url(path), this._withDefaults(options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.patch(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^PATCH/, &#x27;should be PATCH&#x27;);
    test.done();
  });
},

&#x27;Should PUT&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">put</span>(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^PUT/, &#x27;should be PUT&#x27;);
    test.done();
  });
},

&#x27;Should POST&#x27;: function(test) {
  rest.post(host).on(&#x27;complete&#x27;, function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.Service.prototype.request" id="apidoc.element.restler.Service.prototype.request">
        function <span class="apidocSignatureSpan">restler.Service.prototype.</span>request
        <span class="apidocSignatureSpan">(path, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">request = function (path, options) {
  return request(this._url(path), this._withDefaults(options));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!this.options.data) {
    this.headers[&#x27;Content-Length&#x27;] = 0;
  }
}

var proto = (this.url.protocol == &#x27;https:&#x27;) ? https : http;

this.request = proto.<span class="apidocCodeKeywordSpan">request</span>({
  host: this.url.hostname,
  port: this.url.port,
  path: this._fullPath(),
  method: this.options.method,
  headers: this.headers,
  rejectUnauthorized: this.options.rejectUnauthorized,
  agent: this.options.agent
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.restler.index" id="apidoc.module.restler.index">module restler.index</a></h1>


    <h2>
        <a href="#apidoc.element.restler.index.Request" id="apidoc.element.restler.index.Request">
        function <span class="apidocSignatureSpan">restler.index.</span>Request
        <span class="apidocSignatureSpan">(uri, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Request(uri, options) {
  events.EventEmitter.call(this);
  this.url = url.parse(uri);
  this.options = options;
  this.headers = {
    &#x27;Accept&#x27;: &#x27;*/*&#x27;,
    &#x27;User-Agent&#x27;: &#x27;Restler for node.js&#x27;,
    &#x27;Host&#x27;: this.url.host
  };

  this.headers[&#x27;Accept-Encoding&#x27;] = &#x27;gzip, deflate&#x27;;

  mixin(this.headers, options.headers || {});

  // set port and method defaults
  if (!this.url.port) this.url.port = (this.url.protocol == &#x27;https:&#x27;) ? &#x27;443&#x27; : &#x27;80&#x27;;
  if (!this.options.method) this.options.method = (this.options.data) ? &#x27;POST&#x27; : &#x27;GET&#x27;;
  if (typeof this.options.followRedirects == &#x27;undefined&#x27;) this.options.followRedirects = true;

  // stringify query given in options of not given in URL
  if (this.options.query &#x26;&#x26; !this.url.query) {
    if (typeof this.options.query == &#x27;object&#x27;)
      this.url.query = qs.stringify(this.options.query);
    else this.url.query = this.options.query;
  }

  this._applyAuth();

  if (this.options.multipart) {
    this.headers[&#x27;Content-Type&#x27;] = &#x27;multipart/form-data; boundary=&#x27; + multipart.defaultBoundary;
    var multipart_size = multipart.sizeOf(this.options.data, multipart.defaultBoundary);
    if (typeof multipart_size === &#x27;number&#x27; &#x26;&#x26; multipart_size === multipart_size) {
        this.headers[&#x27;Content-Length&#x27;] = multipart_size;
    }
    else {
        console.log(&#x22;Building multipart request without Content-Length header, please specify all file sizes&#x22;);
    }
  } else {
    if (typeof this.options.data == &#x27;object&#x27; &#x26;&#x26; !Buffer.isBuffer(this.options.data)) {
      this.options.data = qs.stringify(this.options.data);
      this.headers[&#x27;Content-Type&#x27;] = &#x27;application/x-www-form-urlencoded&#x27;;
      this.headers[&#x27;Content-Length&#x27;] = this.options.data.length;
    }
    if (typeof this.options.data == &#x27;string&#x27;) {
      var buffer = new Buffer(this.options.data, this.options.encoding || &#x27;utf8&#x27;);
      this.options.data = buffer;
      this.headers[&#x27;Content-Length&#x27;] = buffer.length;
    }
    if (!this.options.data) {
      this.headers[&#x27;Content-Length&#x27;] = 0;
    }
  }

  var proto = (this.url.protocol == &#x27;https:&#x27;) ? https : http;

  this.request = proto.request({
    host: this.url.hostname,
    port: this.url.port,
    path: this._fullPath(),
    method: this.options.method,
    headers: this.headers,
    rejectUnauthorized: this.options.rejectUnauthorized,
    agent: this.options.agent
  });

  this._makeRequest();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.Service" id="apidoc.element.restler.index.Service">
        function <span class="apidocSignatureSpan">restler.index.</span>Service
        <span class="apidocSignatureSpan">(defaults)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Service(defaults) {
  if (defaults.baseURL) {
   this.baseURL = defaults.baseURL;
   delete defaults.baseURL;
  }

  this.defaults = defaults;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.data" id="apidoc.element.restler.index.data">
        function <span class="apidocSignatureSpan">restler.index.</span>data
        <span class="apidocSignatureSpan">(filename, contentType, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">data = function (filename, contentType, data) {
  return new Data(filename, contentType, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
},

&#x27;Test multipart request with Data vars&#x27;: function(test) {
  rest.post(host, {
    data: {
      a: 10,
      b: rest.<span class="apidocCodeKeywordSpan">data</span>(&#x27;b.txt&#x27;, &#x27;text/plain&#x27;, &#x27;thing&#x27;),
      c: rest.data(&#x27;c.txt&#x27;, &#x27;text/plain&#x27;, new Buffer(&#x27;thing&#x27;))
    },
    multipart: true
  }).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /content-type\: multipart\/form-data/, &#x27;should set &#x22;content-type&#x22; header&#x27;);
    test.re(data, /name=&#x22;a&#x22;(\s)+10/, &#x27;should send a=10&#x27;);
    test.re(data, /name=&#x22;b&#x22;; filename=&#x22;b.txt&#x22;\s+Content-Length: 5\s+Content-Type: text\/plain\s+thing\s/, &#
x27;should send b=thing&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.del" id="apidoc.element.restler.index.del">
        function <span class="apidocSignatureSpan">restler.index.</span>del
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function del(url, options) {
  return request(url, shortcutOptions(options, &#x27;DELETE&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.post(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^POST/, &#x27;should be POST&#x27;);
    test.done();
  });
},

&#x27;Should DELETE&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">del</span>(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^DELETE/, &#x27;should be DELETE&#x27;);
    test.done();
  });
},

&#x27;Should HEAD&#x27;: function(test) {
  rest.head(host).on(&#x27;complete&#x27;, function(data, response) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.file" id="apidoc.element.restler.index.file">
        function <span class="apidocSignatureSpan">restler.index.</span>file
        <span class="apidocSignatureSpan">(path, filename, fileSize, encoding, contentType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">file = function (path, filename, fileSize, encoding, contentType) {
  return new File(path, filename, fileSize, encoding, contentType)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// multipart request sending a 321567 byte long file using https
rest.post(&#x27;https://twaud.io/api/v1/upload.json&#x27;, {
  multipart: true,
  username: &#x27;danwrong&#x27;,
  password: &#x27;wouldntyouliketoknow&#x27;,
  data: {
    &#x27;sound[message]&#x27;: &#x27;hello from restler!&#x27;,
    &#x27;sound[file]&#x27;: rest.<span class="apidocCodeKeywordSpan">file</span>(&#x27;doug-e-fresh_the-show.mp3&#x27;, null, 321567
, null, &#x27;audio/mpeg&#x27;)
  }
}).on(&#x27;complete&#x27;, function(data) {
  console.log(data.audio_url);
});

// create a service constructor for very easy API wrappers a la HTTParty...
Twitter = rest.service(function(u, p) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.get" id="apidoc.element.restler.index.get">
        function <span class="apidocSignatureSpan">restler.index.</span>get
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function get(url, options) {
 return request(url, shortcutOptions(options, &#x27;GET&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Example usage
-------------

```javascript
var rest = require(&#x27;./restler&#x27;);

rest.<span class="apidocCodeKeywordSpan">get</span>(&#x27;http://google.com&#x27;).on(&#x27;complete&#x27;, function(result) {
  if (result instanceof Error) {
    console.log(&#x27;Error:&#x27;, result.message);
    this.retry(5000); // try again after 5 sec
  } else {
    console.log(result);
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.head" id="apidoc.element.restler.index.head">
        function <span class="apidocSignatureSpan">restler.index.</span>head
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function head(url, options) {
  return request(url, shortcutOptions(options, &#x27;HEAD&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.del(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^DELETE/, &#x27;should be DELETE&#x27;);
    test.done();
  });
},

&#x27;Should HEAD&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">head</span>(host).on(&#x27;complete&#x27;, function(data, response) {
    test.equal(response.headers[&#x27;request-method&#x27;], &#x27;head&#x27;, &#x27;should be HEAD&#x27;);
    test.done();
  });
},

&#x27;Should GET withouth path&#x27;: function(test) {
  rest.get(host).on(&#x27;complete&#x27;, function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.json" id="apidoc.element.restler.index.json">
        function <span class="apidocSignatureSpan">restler.index.</span>json
        <span class="apidocSignatureSpan">(url, data, options, method)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function json(url, data, options, method) {
  options = options || {};
  options.parser = (typeof options.parser !== &#x22;undefined&#x22;) ? options.parser : parsers.auto;
  options.headers = options.headers || {};
  options.headers[&#x27;content-type&#x27;] = &#x27;application/json&#x27;;
  options.data = JSON.stringify(data || {});
  options.method = method || &#x27;GET&#x27;;
  return request(url, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.patch" id="apidoc.element.restler.index.patch">
        function <span class="apidocSignatureSpan">restler.index.</span>patch
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function patch(url, options) {
  return request(url, shortcutOptions(options, &#x27;PATCH&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.get(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^GET/, &#x27;should be GET&#x27;);
    test.done();
  });
},

&#x27;Should PATCH&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">patch</span>(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^PATCH/, &#x27;should be PATCH&#x27;);
    test.done();
  });
},

&#x27;Should PUT&#x27;: function(test) {
  rest.put(host).on(&#x27;complete&#x27;, function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.patchJson" id="apidoc.element.restler.index.patchJson">
        function <span class="apidocSignatureSpan">restler.index.</span>patchJson
        <span class="apidocSignatureSpan">(url, data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function patchJson(url, data, options) {
  return json(url, data, options, &#x27;PATCH&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    test.equal(obj.secret, data.secret, &#x27;returned: &#x27; + util.inspect(data));
    test.done();
  });
},

&#x27;Should patch and parse JSON via shortcut method&#x27;: function(test) {
  var obj = { secret : &#x27;very secret string&#x27; };
  rest.<span class="apidocCodeKeywordSpan">patchJson</span>(host + &#x27;/push-json&#x27;, obj).on(&#x27;complete&#x27;, function
(data) {
    test.equal(obj.secret, data.secret, &#x27;returned: &#x27; + util.inspect(data));
    test.done();
  });
},

&#x27;Should understand custom mime-type&#x27;: function(test) {
  rest.parsers.auto.matchers[&#x27;application/vnd.github+json&#x27;] = function(data, callback) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.post" id="apidoc.element.restler.index.post">
        function <span class="apidocSignatureSpan">restler.index.</span>post
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function post(url, options) {
  return request(url, shortcutOptions(options, &#x27;POST&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

rest.get(&#x27;http://someslowdomain.com&#x27;,{timeout: 10000}).on(&#x27;timeout&#x27;, function(ms){
  console.log(&#x27;did not return within &#x27;+ms+&#x27; ms&#x27;);
}).on(&#x27;complete&#x27;,function(data,response){
  console.log(&#x27;did not time out&#x27;);
});

rest.<span class="apidocCodeKeywordSpan">post</span>(&#x27;http://user:pass@service.com/action&#x27;, {
  data: { id: 334 },
}).on(&#x27;complete&#x27;, function(data, response) {
  if (response.statusCode == 201) {
    // you can get at the raw response like this...
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.postJson" id="apidoc.element.restler.index.postJson">
        function <span class="apidocSignatureSpan">restler.index.</span>postJson
        <span class="apidocSignatureSpan">(url, data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function postJson(url, data, options) {
  return json(url, data, options, &#x27;POST&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var client = new Twitter(&#x27;danwrong&#x27;, &#x27;password&#x27;);
client.update(&#x27;Tweeting using a Restler service thingy&#x27;).on(&#x27;complete&#x27;, function(data) {
console.log(data);
});

// post JSON
var jsonData = { id: 334 };
rest.<span class="apidocCodeKeywordSpan">postJson</span>(&#x27;http://example.com/action&#x27;, jsonData).on(&#x27;complete&#x27
;, function(data, response) {
// handle response
});

// put JSON
var jsonData = { id: 334 };
rest.putJson(&#x27;http://example.com/action&#x27;, jsonData).on(&#x27;complete&#x27;, function(data, response) {
// handle response
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.put" id="apidoc.element.restler.index.put">
        function <span class="apidocSignatureSpan">restler.index.</span>put
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function put(url, options) {
  return request(url, shortcutOptions(options, &#x27;PUT&#x27;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  rest.patch(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^PATCH/, &#x27;should be PATCH&#x27;);
    test.done();
  });
},

&#x27;Should PUT&#x27;: function(test) {
  rest.<span class="apidocCodeKeywordSpan">put</span>(host).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /^PUT/, &#x27;should be PUT&#x27;);
    test.done();
  });
},

&#x27;Should POST&#x27;: function(test) {
  rest.post(host).on(&#x27;complete&#x27;, function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.putJson" id="apidoc.element.restler.index.putJson">
        function <span class="apidocSignatureSpan">restler.index.</span>putJson
        <span class="apidocSignatureSpan">(url, data, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function putJson(url, data, options) {
  return json(url, data, options, &#x27;PUT&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var jsonData = { id: 334 };
rest.postJson(&#x27;http://example.com/action&#x27;, jsonData).on(&#x27;complete&#x27;, function(data, response) {
  // handle response
});

// put JSON
var jsonData = { id: 334 };
rest.<span class="apidocCodeKeywordSpan">putJson</span>(&#x27;http://example.com/action&#x27;, jsonData).on(&#x27;complete&#x27;,
function(data, response) {
  // handle response
});

```

TODO
----
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.request" id="apidoc.element.restler.index.request">
        function <span class="apidocSignatureSpan">restler.index.</span>request
        <span class="apidocSignatureSpan">(url, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function request(url, options) {
  var request = new Request(url, options);
  request.on(&#x27;error&#x27;, function() {});
  process.nextTick(request.run.bind(request));
  return request;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!this.options.data) {
    this.headers[&#x27;Content-Length&#x27;] = 0;
  }
}

var proto = (this.url.protocol == &#x27;https:&#x27;) ? https : http;

this.request = proto.<span class="apidocCodeKeywordSpan">request</span>({
  host: this.url.hostname,
  port: this.url.port,
  path: this._fullPath(),
  method: this.options.method,
  headers: this.headers,
  rejectUnauthorized: this.options.rejectUnauthorized,
  agent: this.options.agent
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.index.service" id="apidoc.element.restler.index.service">
        function <span class="apidocSignatureSpan">restler.index.</span>service
        <span class="apidocSignatureSpan">(constructor, defaults, methods)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function service(constructor, defaults, methods) {
  constructor.prototype = new Service(defaults || {});
  mixin(constructor.prototype, methods);
  return constructor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  &#x27;sound[file]&#x27;: rest.file(&#x27;doug-e-fresh_the-show.mp3&#x27;, null, 321567, null, &#x27;audio/mpeg&#x27;)
}
}).on(&#x27;complete&#x27;, function(data) {
console.log(data.audio_url);
});

// create a service constructor for very easy API wrappers a la HTTParty...
Twitter = rest.<span class="apidocCodeKeywordSpan">service</span>(function(u, p) {
this.defaults.username = u;
this.defaults.password = p;
}, {
baseURL: &#x27;http://twitter.com&#x27;
}, {
update: function(message) {
  return this.post(&#x27;/statuses/update.json&#x27;, { data: { status: message } });
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.restler.multipartform" id="apidoc.module.restler.multipartform">module restler.multipartform</a></h1>


    <h2>
        <a href="#apidoc.element.restler.multipartform.data" id="apidoc.element.restler.multipartform.data">
        function <span class="apidocSignatureSpan">restler.multipartform.</span>data
        <span class="apidocSignatureSpan">(filename, contentType, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">data = function (filename, contentType, data) {
  return new Data(filename, contentType, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
},

&#x27;Test multipart request with Data vars&#x27;: function(test) {
  rest.post(host, {
    data: {
      a: 10,
      b: rest.<span class="apidocCodeKeywordSpan">data</span>(&#x27;b.txt&#x27;, &#x27;text/plain&#x27;, &#x27;thing&#x27;),
      c: rest.data(&#x27;c.txt&#x27;, &#x27;text/plain&#x27;, new Buffer(&#x27;thing&#x27;))
    },
    multipart: true
  }).on(&#x27;complete&#x27;, function(data) {
    test.re(data, /content-type\: multipart\/form-data/, &#x27;should set &#x22;content-type&#x22; header&#x27;);
    test.re(data, /name=&#x22;a&#x22;(\s)+10/, &#x27;should send a=10&#x27;);
    test.re(data, /name=&#x22;b&#x22;; filename=&#x22;b.txt&#x22;\s+Content-Length: 5\s+Content-Type: text\/plain\s+thing\s/, &#
x27;should send b=thing&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.multipartform.file" id="apidoc.element.restler.multipartform.file">
        function <span class="apidocSignatureSpan">restler.multipartform.</span>file
        <span class="apidocSignatureSpan">(path, filename, fileSize, encoding, contentType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">file = function (path, filename, fileSize, encoding, contentType) {
  return new File(path, filename, fileSize, encoding, contentType)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// multipart request sending a 321567 byte long file using https
rest.post(&#x27;https://twaud.io/api/v1/upload.json&#x27;, {
  multipart: true,
  username: &#x27;danwrong&#x27;,
  password: &#x27;wouldntyouliketoknow&#x27;,
  data: {
    &#x27;sound[message]&#x27;: &#x27;hello from restler!&#x27;,
    &#x27;sound[file]&#x27;: rest.<span class="apidocCodeKeywordSpan">file</span>(&#x27;doug-e-fresh_the-show.mp3&#x27;, null, 321567
, null, &#x27;audio/mpeg&#x27;)
  }
}).on(&#x27;complete&#x27;, function(data) {
  console.log(data.audio_url);
});

// create a service constructor for very easy API wrappers a la HTTParty...
Twitter = rest.service(function(u, p) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.multipartform.sizeOf" id="apidoc.element.restler.multipartform.sizeOf">
        function <span class="apidocSignatureSpan">restler.multipartform.</span>sizeOf
        <span class="apidocSignatureSpan">(parts, boundary)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sizeOf = function (parts, boundary) {
  var totalSize = 0;
	  boundary = boundary || exports.defaultBoundary;
	for (var name in parts) totalSize += new Part(name, parts[name], boundary).sizeOf();
	return totalSize + boundary.length + 6;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
},
data: function(filename, contentType, data) {
  return new Data(filename, contentType, data);
},
sizeOf: function(parts, boundary) {
  var totalSize = 0;
	  boundary = boundary || exports.defaultBoundary;
	for (var name in parts) totalSize += new Part(name, parts[name], boundary).<span class="apidocCodeKeywordSpan">sizeOf</span>();
	return totalSize + boundary.length + 6;
},
write: function(stream, data, callback, boundary) {
  var r = new MultiPartRequest(data, boundary);
  r.write(stream, callback);
  return r;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.multipartform.write" id="apidoc.element.restler.multipartform.write">
        function <span class="apidocSignatureSpan">restler.multipartform.</span>write
        <span class="apidocSignatureSpan">(stream, data, callback, boundary)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (stream, data, callback, boundary) {
  var r = new MultiPartRequest(data, boundary);
  r.write(stream, callback);
  return r;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Stream.prototype = {
//write to an internal String or to the Stream
write: function(data) {
	if (this.string != undefined) {
		this.string += data;
	} else {
		this.stream.<span class="apidocCodeKeywordSpan">write</span>(data, &#x22;binary&#x22;);
	}
},

//stolen from underscore.js
_isString: function(obj) {
  return !!(obj === &#x27;&#x27; || (obj &#x26;&#x26; obj.charCodeAt &#x26;&#x26; obj.substr));
}
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.restler.parsers" id="apidoc.module.restler.parsers">module restler.parsers</a></h1>


    <h2>
        <a href="#apidoc.element.restler.parsers.auto" id="apidoc.element.restler.parsers.auto">
        function <span class="apidocSignatureSpan">restler.parsers.</span>auto
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">auto = function (data, callback) {
  var contentType = this.headers[&#x27;content-type&#x27;];
  var contentParser;
  if (contentType) {
    contentType = contentType.replace(/;.+/, &#x27;&#x27;); // remove all except mime type (eg. text/html; charset=UTF-8)
    if (contentType in parsers.auto.matchers) {
      contentParser = parsers.auto.matchers[contentType];
    } else {
      // custom (vendor) mime types
      var parts = contentType.match(/^([\w-]+)\/vnd((?:\.(?:[\w-]+))+)\+([\w-]+)$/i);
      if (parts) {
        var type = parts[1];
        var vendors = parts[2].substr(1).split(&#x27;.&#x27;);
        var subtype = parts[3];
        var vendorType;
        while (vendors.pop() &#x26;&#x26; !(vendorType in parsers.auto.matchers)) {
          vendorType = vendors.length
            ? type + &#x27;/vnd.&#x27; + vendors.join(&#x27;.&#x27;) + &#x27;+&#x27; + subtype
            : vendorType = type + &#x27;/&#x27; + subtype;
        }
        contentParser = parsers.auto.matchers[vendorType];
      }
    }
  }
  if (typeof contentParser == &#x27;function&#x27;) {
    contentParser.call(this, data, callback);
  } else {
    callback(null, data);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.parsers.json" id="apidoc.element.restler.parsers.json">
        function <span class="apidocSignatureSpan">restler.parsers.</span>json
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">json = function (data, callback) {
  if (data &#x26;&#x26; data.length) {
    var parsedData;
    try {
      parsedData = JSON.parse(data);
    } catch (err) {
      err.message = &#x27;Failed to parse JSON body: &#x27; + err.message;
      callback(err, null);
    }
    if (parsedData !== undefined) {
      callback(null, parsedData);
    }
  } else {
    callback(null, null);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.parsers.xml" id="apidoc.element.restler.parsers.xml">
        function <span class="apidocSignatureSpan">restler.parsers.</span>xml
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">xml = function (data, callback) {
  if (data) {
    var parser = new xml2js.Parser(parsers.xml.options);
    parser.parseString(data, function(err, data) {
      if (err) {
        err.message = &#x27;Failed to parse XML body: &#x27; + err.message;
      }
      callback(err, data);
    });
  } else {
    callback(null, null);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.restler.parsers.yaml" id="apidoc.element.restler.parsers.yaml">
        function <span class="apidocSignatureSpan">restler.parsers.</span>yaml
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">yaml = function (data, callback) {
  if (data) {
    try {
      callback(null, yaml.eval(data));
    } catch (err) {
      err.message = &#x27;Failed to parse YAML body: &#x27; + err.message;
      callback(err, null);
    }
  } else {
    callback(null, null);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
